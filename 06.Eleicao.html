<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eleições</title>
</head>
<body>
    <h1>Eleições 2023</h1>  
        <P>Candidato X: 889</P>
        <P>Candidato Y: 847</P>
        <P>Candidato Z: 515</P>
        <P>Branco: 0</P>
        <input type="button" value="Votar" onclick="votar()">
        <hr>       
        <div id="res"></div>
        
        <script> 
            var x = 0
            var y = 0
            var z = 0
            var branco = 0
            var nulo = 0

            function votar() {        
                var indicador = true
                while(indicador == true){
                try{
                    var voto = Number(prompt('Digite o número do seu candidato:'))
                    indicador = isNaN(voto) //indicador aqui é false
                    console.log(indicador)
                    if(indicador == false) {
                      
                        switch(voto){
                            case 889:
                                x = x + 1
                                console.log(x)
                                break;
                            case 847:
                                y = y + 1
                                console.log(y)
                                break;
                            case 515:
                                z = z + 1
                                console.log(z)
                                break;     
                            case 0:
                                branco = branco + 1
                                console.log(branco)
                                break;
                            default:
                                nulo = nulo + 1
                                console.log(nulo)
                        }
                    
                    var continuar = true 
                    while(continuar == true )                        
                    try{
                        var finalizar = Number(prompt('Deseja finalizar a votação? 1: Finalizar |  2: Continuar votando'))
                        switch(finalizar){
                            case 1:

                                if(x > y && x > z && x > (branco + nulo)){
                                    document.write('O vencedor é o Candidato X com ' + x + ' votos! | ')
                                    document.write('Candidato X: ' + x + ' | ')
                                    document.write('Candidato Y: ' + y + ' | ')
                                    document.write('Candidato Z: ' + z + ' | ')
                                    document.write('Brancos e Nulos: ' + (branco + nulo))
                                }
                           else if(y > x && y > z && y > (branco + nulo)){
                                    document.write('O vencedor é o Candidato Y com ' + y + ' votos! | ')
                                    document.write('Candidato X: ' + x + ' | ')
                                    document.write('Candidato Y: ' + y + ' | ')
                                    document.write('Candidato Z: ' + z + ' | ')
                                    document.write('Brancos e Nulos: ' + (branco + nulo))
                                }
                            else if(z > x && z > y && z > (branco + nulo)){
                                    document.write('O vencedor é o Candidato Z com ' + z + ' votos! | ')
                                    document.write('Candidato X: ' + x + ' | ')
                                    document.write('Candidato Y: ' + y + ' | ')
                                    document.write('Candidato Z: ' + z + ' | ')
                                    document.write('Brancos e Nulos: ' + (branco + nulo))
                                }
                                else{
                                    document.write('Não há vencedor por questões de empate ou a maioria dos votos serem brancos e nulos | ')
                                    document.write('Candidato X: ' + x + ' | ')
                                    document.write('Candidato Y: ' + y + ' | ')
                                    document.write('Candidato Z: ' + z + ' | ')
                                    document.write('Brancos e Nulos: ' + (branco + nulo))
                                }
                            
                                continuar = false
                                break;
                            case 2:
                                votar()
                                continuar = false
                                break;
                            default:
                            throw new Error("Valor inválido. Digite 1 para Finalizar ou 2 para Continuar votando")
                        }
       
                    }
                    catch(error){
                    window.alert(error)}}

                    else{
                    throw new Error("Valor inválido. Digite novamente!")
                    }
                } 
                catch(error){
                window.alert(error)}
            }    
         } 
            </script>

   
</body>
</html>